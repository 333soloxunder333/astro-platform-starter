---
// src/pages/index.astro
---

<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AMS01 - Perfil & Arte IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
</head>
<body>

    <canvas id="matrix-bg"></canvas>

    <div class="overlay"></div>

    <audio id="bg-music" preload="auto"></audio>

    <div class="spotify-widget" id="spotify-widget">
        <div class="spotify-cover-container" id="album-cover-container">
            <img src="" id="album-cover" alt="Album Art">
        </div>
        
        <div class="spotify-content">
            <div class="spotify-info">
                <span class="song-title" id="track-title">Cargando...</span>
                <span class="song-artist" id="track-artist">...</span>
            </div>
            
            <div class="spotify-controls">
                <button id="prev-btn" class="control-btn" aria-label="Anterior"><i class="fa-solid fa-backward-step"></i></button>
                <button id="play-btn" class="control-btn play-pause" aria-label="Reproducir"><i class="fa-solid fa-play"></i></button>
                <button id="next-btn" class="control-btn" aria-label="Siguiente"><i class="fa-solid fa-forward-step"></i></button>
            </div>
        </div>

        <div class="spotify-visualizer">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </div>

    <main class="card profile-card">
        <div class="avatar-container">
            <img src="/perfil.jpg" alt="Mi Foto" class="avatar">
            <div class="status-indicator online" title="En línea"></div>
        </div>

        <h1>AMS01</h1>
        
        <div class="discord-status">
            <i class="fa-brands fa-discord"></i> Jugando a VS Code
        </div>

        <div class="social-links">
            <a href="#" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
            <a href="https://www.instagram.com/xunder999?igsh=ZXR3N3luNTh0eWxm" target="_blank">
                <i class="fa-brands fa-instagram"></i>
            </a>
            <a href="#" target="_blank"><i class="fa-brands fa-github"></i></a>
            <a href="#" target="_blank"><i class="fa-brands fa-twitch"></i></a>
        </div>

        <div class="scroll-indicator">
            <p>Galería IA</p>
            <i class="fa-solid fa-chevron-down"></i>
        </div>
    </main>

    <section class="card gallery-card">
        <h2><i class="fa-solid fa-robot"></i> Arte Generado por IA</h2>
        <p class="subtitle">Colección personal de generaciones</p>
        
        <div class="gallery-grid">
            <div class="gallery-item"><img src="/ia1.jpg" alt="Arte IA 1" loading="lazy"></div>
            <div class="gallery-item"><img src="/ia2.jpg" alt="Arte IA 2" loading="lazy"></div>
            <div class="gallery-item"><img src="/ia3.jpg" alt="Arte IA 3" loading="lazy"></div>
            <div class="gallery-item"><img src="/ia4.jpg" alt="Arte IA 4" loading="lazy"></div>
        </div>
    </section>

    <footer>
        <p>© 2024 AMS01 - Creado con Astro</p>
    </footer>

    <script is:inline>
        // 1. CONFIGURACIÓN (CAMBIA TUS CANCIONES AQUÍ)
        const playlist = [
            {
                title: "Vibe Coding", 
                artist: "AMS01 Radio", 
                file: "/cancion.mp3",       
                image: "/cover1.jpg"        
            },
            {
                title: "Night City", 
                artist: "Synthwave Mix", 
                file: "/cancion2.mp3",
                image: "/cover2.jpg"
            },
        ];

        // 2. MATRIX
        function initMatrix() {
            const canvas = document.getElementById('matrix-bg');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            if (!ctx) return;

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const charArray = chars.split('');
            const fontSize = 14;
            const columns = window.innerWidth / fontSize;
            const drops = [];
            for(let i = 0; i < columns; i++) { drops[i] = 1; }

            function draw() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#FFFFFF'; 
                ctx.font = fontSize + 'px monospace';
                for(let i = 0; i < drops.length; i++) {
                    const text = charArray[Math.floor(Math.random() * charArray.length)];
                    ctx.fillText(text, i*fontSize, drops[i]*fontSize);
                    if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                    drops[i]++;
                }
            }
            setInterval(draw, 33);
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // 3. REPRODUCTOR
        function initPlayer() {
            const audio = document.getElementById('bg-music');
            const widget = document.getElementById('spotify-widget');
            const title
